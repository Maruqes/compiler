
global{
}

func getStringLen(ptr s1){
	dd res = 0;
	while s1[res] != 0 {
		res++;
	}
	return res;
}

func print(ptr s1){
	dd len = getStringLen(s1);
	asm(mov64_r_i, rax, 1);
	asm(mov64_r_i, rdi, 1);
	loadReg(rsi, s1);
	loadReg(rdx, len);
	asm(syscall);
	return;
}

func getArgsPtr(dq argc, dq rbpVar) {
	ptr args<dq> = rbpVar + 24;
	return args;
}

func main(dq argc) {
	dq rbpVar;
	loadVar(rbpVar, rbp);
	ptr args<dq> = getArgsPtr(argc, rbpVar);

	for dq i = 0; i < argc; i++; {
		print("arg ");
		print(args[i]);
		print("\n");
	}
	
	return;
}